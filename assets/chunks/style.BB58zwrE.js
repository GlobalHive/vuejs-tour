import{d as we,h as k,p as $,af as pe,v as Se,x as Te,q as ke,b as $e,o as G,j as U,N as xe,c as J,e as Y,r as me,t as Z,Z as ie,n as Le,ag as Ce,P as ee}from"./framework.D1PSSoiO.js";/*! NanoPop 2.4.2 MIT | https://github.com/Simonwep/nanopop */const Ae={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},Ee=(e,n,o)=>{const{container:t,arrow:y,margin:v,padding:f,position:r,variantFlipOrder:s,positionFlipOrder:p}={container:document.documentElement.getBoundingClientRect(),...Ae,...o},{left:b,top:F}=n.style;n.style.left="0",n.style.top="0";const u=e.getBoundingClientRect(),d=n.getBoundingClientRect(),I={t:u.top-d.height-v,b:u.bottom+v,r:u.right+v,l:u.left-d.width-v},j={vs:u.left,vm:u.left+u.width/2-d.width/2,ve:u.left+u.width-d.width,hs:u.top,hm:u.bottom-u.height/2-d.height/2,he:u.bottom-d.height},[P,m="middle"]=r.split("-"),h=p[P],T=s[m],{top:w,left:M,bottom:D,right:K}=t;for(const _ of h){const S=_==="t"||_==="b";let g=I[_];const[N,C]=S?["top","left"]:["left","top"],[R,A]=S?[d.height,d.width]:[d.width,d.height],[z,H]=S?[D,K]:[K,D],[E,te]=S?[w,M]:[M,w];if(!(g<E||g+R+f>z))for(const O of T){let x=j[(S?"v":"h")+O];if(!(x<te||x+A+f>H)){if(x-=d[C],g-=d[N],n.style[C]=`${x}px`,n.style[N]=`${g}px`,y){const L=S?u.width/2:u.height/2,V=A/2,q=L>V,ae={s:q?V:L,m:V,e:q?V:A-L},W={t:R,b:0,r:0,l:R},Q=x+ae[O],X=g+W[_];y.style[C]=`${Q}px`,y.style[N]=`${X}px`}return _+O}}}return n.style.left=b,n.style.top=F,null},Oe=(e,n,o)=>{const t=typeof e=="object"&&!(e instanceof HTMLElement)?e:{reference:e,popper:n,...o};return{update(y=t){const{reference:v,popper:f}=Object.assign(t,y);if(!f||!v)throw new Error("Popper- or reference-element missing.");return Ee(v,f,t)}}};var Be=function(n,o,t,y){return n/=y/2,n<1?t/2*n*n+o:(n--,-t/2*(n*(n-2)-1)+o)},he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie=function(){var n=void 0,o=void 0,t=void 0,y=void 0,v=void 0,f=void 0,r=void 0,s=void 0,p=void 0,b=void 0,F=void 0,u=void 0;function d(){return window.scrollY||window.pageYOffset}function I(h){return h.getBoundingClientRect().top+o}function j(h){p||(p=h),b=h-p,F=v(b,o,r,s),window.scrollTo(0,F),b<s?window.requestAnimationFrame(j):P()}function P(){window.scrollTo(0,o+r),n&&f&&(n.setAttribute("tabindex","-1"),n.focus()),typeof u=="function"&&u(),p=!1}function m(h){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(s=T.duration||1e3,y=T.offset||0,u=T.callback,v=T.easing||Be,f=T.a11y||!1,o=d(),typeof h>"u"?"undefined":he(h)){case"number":n=void 0,f=!1,t=o+h;break;case"object":n=h,t=I(n);break;case"string":n=document.querySelector(h),t=I(n);break}switch(r=t-o+y,he(T.duration)){case"number":s=T.duration;break;case"function":s=T.duration(r);break}window.requestAnimationFrame(j)}return m},je=Ie();const Pe=(e,n,o,t)=>(e/=t,o*e*e+n),De=(e,n,o,t)=>(e/=t,-o*e*(e-2)+n),ge=(e,n,o,t)=>(e/=t/2,e<1?o/2*e*e+n:(e--,-o/2*(e*(e-2)-1)+n)),_e=(e,n,o,t)=>(e/=t,o*e*e*e+n),qe=(e,n,o,t)=>(e/=t,e--,o*(e*e*e+1)+n),Qe=(e,n,o,t)=>(e/=t/2,e<1?o/2*e*e*e+n:(e-=2,o/2*(e*e*e+2)+n)),Fe=(e,n,o,t)=>(e/=t,o*e*e*e*e+n),Me=(e,n,o,t)=>(e/=t,e--,-o*(e*e*e*e-1)+n),Ne=(e,n,o,t)=>(e/=t/2,e<1?o/2*e*e*e*e+n:(e-=2,-o/2*(e*e*e*e-2)+n)),Re=(e,n,o,t)=>(e/=t,o*e*e*e*e*e+n),ze=(e,n,o,t)=>(e/=t,e--,o*(e*e*e*e*e+1)+n),He=(e,n,o,t)=>(e/=t/2,e<1?o/2*e*e*e*e*e+n:(e-=2,o/2*(e*e*e*e*e+2)+n)),Ve={easeInQuad:Pe,easeOutQuad:De,easeInOutQuad:ge,easeInCubic:_e,easeOutCubic:qe,easeInOutCubic:Qe,easeInQuart:Fe,easeOutQuart:Me,easeInOutQuart:Ne,easeInQuint:Re,easeOutQuint:ze,easeInOutQuint:He},Ge=["data-hidden"],Ue=["id","data-hidden"],Ke=["id","aria-modal","aria-label","aria-describedby","tabindex","data-hidden"],Je={key:0,role:"status","aria-live":"polite","aria-atomic":"true",class:"vjt-sr-only"},Ye=["id"],Ze=["id","innerHTML"],We={class:"vjt-actions"},Xe=["aria-label"],et=["aria-label"],tt=["aria-label"],ot=we({__name:"VTour",props:{name:{default:""},steps:{},backdrop:{type:Boolean,default:!1},autoStart:{type:Boolean,default:!1},startDelay:{default:0},highlight:{type:Boolean,default:!1},margin:{default:8},buttonLabels:{},saveToLocalStorage:{default:"never"},hideSkip:{type:Boolean,default:!1},hideArrow:{type:Boolean,default:!1},noScroll:{type:Boolean,default:!1},resizeTimeout:{default:250},defaultPlacement:{default:"right"},jumpOptions:{},enableA11y:{type:Boolean,default:!1},keyboardNav:{type:Boolean,default:!0},ariaLabel:{default:"Guided tour"},teleportDelay:{default:100},restartOnPropChange:{type:Boolean,default:!0}},emits:["onTourStart","onTourEnd","onTourStep"],setup(e,{expose:n,emit:o}){const t=e,y=o,v=k(()=>t.name?`vjt-${t.name}`:"vjt-tour"),f=$(),r=$(0),s=$(0),p=$(1),b=k(()=>t.steps[r.value]),F=k(()=>t.steps[s.value]),u=k(()=>t.steps[p.value]),d=pe({currentStep:r,lastStep:s,nextStep:p,getCurrentStep:b,getLastStep:F,getNextStep:u}),I=k(()=>r.value===t.steps.length-1),j=k(()=>{var a,l;return I.value?((a=t.buttonLabels)==null?void 0:a.done)??"Done":((l=t.buttonLabels)==null?void 0:l.next)??"Next"}),P=$(""),m=$(!1),h=$(!1),T=$("right"),w=$(!1),M=k(()=>t.name?`vjt-${t.name}`:"vjt"),D=k(()=>`${M.value}-tooltip`),K=k(()=>`${M.value}-backdrop`),_=k(()=>`${M.value}-arrow`),S=k(()=>t.name?`vjt-highlight-${t.name}`:"vjt-highlight"),g=$(),N=$();let C=null;const R={duration:500,offset:-100},A=()=>localStorage.getItem(v.value)==="true",z=pe({name:void 0,stepsRef:null}),H=async()=>{if(!A()){if(m.value){const a=t.name!==z.name,l=t.steps!==z.stepsRef;if(!(a||l))return;E(),await ee()}if(t.saveToLocalStorage==="step"){const a=localStorage.getItem(v.value);r.value=parseInt(a||"0",10),r.value>0&&(s.value=Math.max(r.value-1,0),p.value=r.value+1)}else r.value=0;re=setTimeout(async()=>{var i;await q(r.value);const a=b.value;if(!a){console.warn("No step data available");return}const l=document.querySelector(a.target);if(!l){console.warn(`Tour target element not found: ${a.target}`);return}if(await new Promise(c=>{le=setTimeout(c,t.teleportDelay)}),g.value||(g.value=document.querySelector(`#${D.value}`)),N.value||(N.value=document.querySelector(`#${K.value}`)),!g.value){console.warn("Tooltip element not found in DOM");return}t.enableA11y&&typeof document<"u"&&(C=document.activeElement),m.value=!0,w.value=!0,await ee();{const c=t.highlight||a.highlight,B=t.margin||(c?14:8);f.value=Oe(l,g.value,{position:a.placement||t.defaultPlacement,margin:B})}await Q(),w.value=!1,t.enableA11y&&(await ee(),(i=g.value)==null||i.focus()),z.name=t.name,z.stepsRef=t.steps,y("onTourStart")},t.startDelay)}},E=()=>{clearTimeout(re),clearTimeout(le),m.value=!1,h.value=!1,w.value=!1,document.querySelectorAll(`.${S.value}`).forEach(a=>a.classList.remove(S.value)),f.value&&(f.value=void 0),t.enableA11y&&C&&(C.focus(),C=null)},te=(a=!1)=>{E(),r.value=0,s.value=0,p.value=1,localStorage.removeItem(v.value),a&&H()},O=async()=>{if(await q(p.value),w.value=!0,s.value=r.value,r.value++,r.value>t.steps.length-1){L();return}p.value=r.value+1,await Q(),w.value=!1},x=async()=>{if(await q(s.value),w.value=!0,r.value=s.value,s.value=Math.max(s.value-1,0),r.value<0){L();return}p.value=r.value+1,await Q(),w.value=!1},L=()=>{E(),t.saveToLocalStorage!=="never"&&localStorage.setItem(v.value,"true"),y("onTourEnd")},V=async a=>{if(a<0||a>=t.steps.length){console.warn(`Invalid step index: ${a}`);return}await q(a),w.value=!0,r.value=a,s.value=Math.max(a-1,0),p.value=a+1,await Q(),w.value=!1},q=async a=>{const l=t.steps[a];l!=null&&l.onBefore&&await l.onBefore()},ae=a=>{!a||!g.value||(g.value.setAttribute("data-arrow",a),T.value=a)},W=()=>{const a=b.value;if(!a||!f.value)return;const l=document.querySelector(a.target);if(!l)return;X(),ue();const i=f.value.update({reference:l,position:a.placement||t.defaultPlacement});ae(i||t.defaultPlacement)},Q=async()=>{const a=b.value;if(!a)return;const l=document.querySelector(a.target);!l||!g.value||!f.value||(!t.noScroll&&!a.noScroll&&await new Promise(i=>{const c={duration:R.duration,offset:R.offset,easing:"easeInOutQuad",a11y:t.enableA11y,...t.jumpOptions,...a.jumpOptions},B=Ve[c.easing]||ge;je(l,{duration:c.duration,offset:c.offset,easing:B,a11y:c.a11y,callback:()=>i()})}),W(),t.saveToLocalStorage==="step"&&localStorage.setItem(v.value,r.value.toString()),a.onAfter&&await a.onAfter(),y("onTourStep",r.value))},X=()=>{document.querySelectorAll(`.${S.value}`).forEach(i=>i.classList.remove(S.value));const a=b.value;if(!a||!t.highlight&&!a.highlight)return;const l=document.querySelector(a.target);l&&(l.classList.add(S.value),P.value=ye(`.${S.value}`))},ue=()=>{const a=b.value,l=t.backdrop||!!(a!=null&&a.backdrop);h.value=l},ne=()=>{A()||m.value&&W()};let oe,re,le;const se=()=>{A()||(clearTimeout(oe),ne(),oe=setTimeout(()=>{ne()},t.resizeTimeout))};function ye(a){if(typeof document>"u")return"";const l=document.querySelector(a);if(!l)return"";const i=l.getBoundingClientRect();return`polygon(
    0% 0%,
    0% 100%,
    ${i.left}px 100%,
    ${i.left}px ${i.top}px,
    ${i.right}px ${i.top}px,
    ${i.right}px ${i.bottom}px,
    ${i.left}px ${i.bottom}px,
    ${i.left}px 100%,
    100% 100%,
    100% 0%
  )`}P.value="";const ce=()=>{A()||m.value&&ne()},de=a=>{var l;if(!(!m.value||!t.enableA11y||!t.keyboardNav))switch(a.key){case"Escape":L(),a.preventDefault();break;case"ArrowRight":case"Enter":if(a.key==="Enter"&&((l=a.target)==null?void 0:l.tagName)==="BUTTON")return;O(),a.preventDefault();break;case"ArrowLeft":r.value>0&&(x(),a.preventDefault());break}};return Se(()=>{t.keyboardNav&&window.addEventListener("keydown",de),t.autoStart&&H(),window.addEventListener("resize",se),window.addEventListener("scroll",ce,!0)}),Te(()=>{t.keyboardNav&&window.removeEventListener("keydown",de),window.removeEventListener("resize",se),window.removeEventListener("scroll",ce,!0),clearTimeout(oe),clearTimeout(re),clearTimeout(le),m.value&&E()}),ke(()=>[t.name,t.steps,t.restartOnPropChange],async([a,l,i],[c,B])=>{if(!i||!m.value)return;const ve=a!==c;if(ve||l!==B){if(ve&&c!==void 0){const fe=c?`vjt-highlight-${c}`:"vjt-highlight";document.querySelectorAll(`.${fe}`).forEach(be=>be.classList.remove(fe))}E(),await ee(),H()}}),n({startTour:H,nextStep:O,lastStep:x,endTour:L,stopTour:E,goToStep:V,resetTour:te,updatePosition:Q,updateHighlight:X,updateBackdrop:ue}),(a,l)=>{var i;return G(),$e(Ce,{to:"body"},[U("div",{class:Le(["vjt-modal-overlay",{"vjt-tour-active":m.value}]),"data-hidden":!m.value},[U("div",{id:K.value,"data-hidden":!h.value,style:xe({"clip-path":P.value})},null,12,Ue),U("div",{id:D.value,ref_key:"_Tooltip",ref:g,role:"dialog","aria-modal":e.enableA11y?"true":void 0,"aria-label":((i=b.value)==null?void 0:i.ariaLabel)||e.ariaLabel,"aria-describedby":`${D.value}-content`,tabindex:e.enableA11y?"0":void 0,"data-hidden":!m.value||w.value},[m.value?(G(),J("div",{key:`step-${r.value}`},[e.enableA11y?(G(),J("div",Je," Step "+Z(r.value+1)+" of "+Z(t.steps.length),1)):Y("",!0),e.hideArrow?Y("",!0):(G(),J("div",{key:1,id:_.value},null,8,Ye)),me(a.$slots,"content",{currentStepIndex:r.value,currentStepData:b.value},()=>{var c;return[U("div",{id:`${D.value}-content`,innerHTML:(c=d.getCurrentStep)==null?void 0:c.content},null,8,Ze)]}),me(a.$slots,"actions",{lastStep:x,nextStep:O,endTour:L,getNextLabel:j.value,props:t,_CurrentStep:d},()=>{var c,B;return[U("div",We,[s.value<r.value?(G(),J("button",{key:0,type:"button",onClick:ie(x,["prevent"]),"aria-label":e.enableA11y?`Go to previous step, step ${r.value} of ${t.steps.length}`:void 0},Z(((c=t.buttonLabels)==null?void 0:c.back)||"Back"),9,Xe)):Y("",!0),t.hideSkip?Y("",!0):(G(),J("button",{key:1,type:"button",onClick:ie(L,["prevent"]),"aria-label":e.enableA11y?"Skip tour and close":void 0},Z(((B=t.buttonLabels)==null?void 0:B.skip)||"Skip"),9,et)),U("button",{type:"button",onClick:ie(O,["prevent"]),"aria-label":e.enableA11y?I.value?"Finish tour":`Go to next step, step ${p.value+1} of ${t.steps.length}`:void 0},Z(j.value),9,tt)])]})])):Y("",!0)],8,Ke)],10,Ge)])}}});export{ot as _};
