import{d as me,h as $,p as x,af as ge,v as he,x as ye,b as be,o as R,j as V,N as we,c as K,e as J,r as ce,t as Y,Z as le,n as Se,ag as Te,P as de}from"./framework.D1PSSoiO.js";/*! NanoPop 2.4.2 MIT | https://github.com/Simonwep/nanopop */const ke={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},$e=(e,o,n)=>{const{container:t,arrow:h,margin:v,padding:c,position:r,variantFlipOrder:s,positionFlipOrder:f}={container:document.documentElement.getBoundingClientRect(),...ke,...n},{left:y,top:_}=o.style;o.style.left="0",o.style.top="0";const i=e.getBoundingClientRect(),d=o.getBoundingClientRect(),O={t:i.top-d.height-v,b:i.bottom+v,r:i.right+v,l:i.left-d.width-v},I={vs:i.left,vm:i.left+i.width/2-d.width/2,ve:i.left+i.width-d.width,hs:i.top,hm:i.bottom-i.height/2-d.height/2,he:i.bottom-d.height},[C,m="middle"]=r.split("-"),p=f[C],T=s[m],{top:w,left:N,bottom:j,right:H}=t;for(const P of p){const S=P==="t"||P==="b";let g=O[P];const[q,A]=S?["top","left"]:["left","top"],[Q,E]=S?[d.height,d.width]:[d.width,d.height],[G,F]=S?[j,H]:[H,j],[te,M]=S?[w,N]:[N,w];if(!(g<te||g+Q+c>G))for(const B of T){let k=I[(S?"v":"h")+B];if(!(k<M||k+E+c>F)){if(k-=d[A],g-=d[q],o.style[A]=`${k}px`,o.style[q]=`${g}px`,h){const U=S?i.width/2:i.height/2,L=E/2,Z=U>L,W={s:Z?L:U,m:L,e:Z?L:E-U},D={t:Q,b:0,r:0,l:Q},X=k+W[B],ee=g+D[P];h.style[A]=`${X}px`,h.style[q]=`${ee}px`}return P+B}}}return o.style.left=y,o.style.top=_,null},xe=(e,o,n)=>{const t=typeof e=="object"&&!(e instanceof HTMLElement)?e:{reference:e,popper:o,...n};return{update(h=t){const{reference:v,popper:c}=Object.assign(t,h);if(!c||!v)throw new Error("Popper- or reference-element missing.");return $e(v,c,t)}}};var Le=function(o,n,t,h){return o/=h/2,o<1?t/2*o*o+n:(o--,-t/2*(o*(o-2)-1)+n)},ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae=function(){var o=void 0,n=void 0,t=void 0,h=void 0,v=void 0,c=void 0,r=void 0,s=void 0,f=void 0,y=void 0,_=void 0,i=void 0;function d(){return window.scrollY||window.pageYOffset}function O(p){return p.getBoundingClientRect().top+n}function I(p){f||(f=p),y=p-f,_=v(y,n,r,s),window.scrollTo(0,_),y<s?window.requestAnimationFrame(I):C()}function C(){window.scrollTo(0,n+r),o&&c&&(o.setAttribute("tabindex","-1"),o.focus()),typeof i=="function"&&i(),f=!1}function m(p){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(s=T.duration||1e3,h=T.offset||0,i=T.callback,v=T.easing||Le,c=T.a11y||!1,n=d(),typeof p>"u"?"undefined":ve(p)){case"number":o=void 0,c=!1,t=n+p;break;case"object":o=p,t=O(o);break;case"string":o=document.querySelector(p),t=O(o);break}switch(r=t-n+h,ve(T.duration)){case"number":s=T.duration;break;case"function":s=T.duration(r);break}window.requestAnimationFrame(I)}return m},Ee=Ae();const Be=(e,o,n,t)=>(e/=t,n*e*e+o),Oe=(e,o,n,t)=>(e/=t,-n*e*(e-2)+o),fe=(e,o,n,t)=>(e/=t/2,e<1?n/2*e*e+o:(e--,-n/2*(e*(e-2)-1)+o)),Ie=(e,o,n,t)=>(e/=t,n*e*e*e+o),Ce=(e,o,n,t)=>(e/=t,e--,n*(e*e*e+1)+o),je=(e,o,n,t)=>(e/=t/2,e<1?n/2*e*e*e+o:(e-=2,n/2*(e*e*e+2)+o)),Pe=(e,o,n,t)=>(e/=t,n*e*e*e*e+o),De=(e,o,n,t)=>(e/=t,e--,-n*(e*e*e*e-1)+o),_e=(e,o,n,t)=>(e/=t/2,e<1?n/2*e*e*e*e+o:(e-=2,-n/2*(e*e*e*e-2)+o)),Ne=(e,o,n,t)=>(e/=t,n*e*e*e*e*e+o),qe=(e,o,n,t)=>(e/=t,e--,n*(e*e*e*e*e+1)+o),Qe=(e,o,n,t)=>(e/=t/2,e<1?n/2*e*e*e*e*e+o:(e-=2,n/2*(e*e*e*e*e+2)+o)),Fe={easeInQuad:Be,easeOutQuad:Oe,easeInOutQuad:fe,easeInCubic:Ie,easeOutCubic:Ce,easeInOutCubic:je,easeInQuart:Pe,easeOutQuart:De,easeInOutQuart:_e,easeInQuint:Ne,easeOutQuint:qe,easeInOutQuint:Qe},Me=["data-hidden"],ze=["id","data-hidden"],Re=["id","aria-modal","aria-label","aria-describedby","tabindex","data-hidden"],Ve={key:0,role:"status","aria-live":"polite","aria-atomic":"true",class:"vjt-sr-only"},He=["id"],Ge=["id","innerHTML"],Ue={class:"vjt-actions"},Ke=["aria-label"],Je=["aria-label"],Ye=["aria-label"],We=me({__name:"VTour",props:{name:{default:""},steps:{},backdrop:{type:Boolean,default:!1},autoStart:{type:Boolean,default:!1},startDelay:{default:0},highlight:{type:Boolean,default:!1},margin:{default:8},buttonLabels:{},saveToLocalStorage:{default:"never"},hideSkip:{type:Boolean,default:!1},hideArrow:{type:Boolean,default:!1},noScroll:{type:Boolean,default:!1},resizeTimeout:{default:250},defaultPlacement:{default:"right"},jumpOptions:{},enableA11y:{type:Boolean,default:!1},keyboardNav:{type:Boolean,default:!0},ariaLabel:{default:"Guided tour"},teleportDelay:{default:100}},emits:["onTourStart","onTourEnd","onTourStep"],setup(e,{expose:o,emit:n}){const t=e,h=n,v=$(()=>t.name?`vjt-${t.name}`:"vjt-tour"),c=x(),r=x(0),s=x(0),f=x(1),y=$(()=>t.steps[r.value]),_=$(()=>t.steps[s.value]),i=$(()=>t.steps[f.value]),d=ge({currentStep:r,lastStep:s,nextStep:f,getCurrentStep:y,getLastStep:_,getNextStep:i}),O=$(()=>r.value===t.steps.length-1),I=$(()=>{var a,l;return O.value?((a=t.buttonLabels)==null?void 0:a.done)??"Done":((l=t.buttonLabels)==null?void 0:l.next)??"Next"}),C=x(""),m=x(!1),p=x(!1),T=x("right"),w=x(!1),N=$(()=>t.name?`vjt-${t.name}`:"vjt"),j=$(()=>`${N.value}-tooltip`),H=$(()=>`${N.value}-backdrop`),P=$(()=>`${N.value}-arrow`),S=$(()=>t.name?`vjt-highlight-${t.name}`:"vjt-highlight"),g=x(),q=x();let A=null;const Q={duration:500,offset:-100},E=()=>localStorage.getItem(v.value)==="true",G=async()=>{if(!E()&&!m.value){if(t.saveToLocalStorage==="step"){const a=localStorage.getItem(v.value);r.value=parseInt(a||"0",10),r.value>0&&(s.value=Math.max(r.value-1,0),f.value=r.value+1)}else r.value=0;ne=setTimeout(async()=>{var u;await L(r.value);const a=y.value;if(!a){console.warn("No step data available");return}const l=document.querySelector(a.target);if(!l){console.warn(`Tour target element not found: ${a.target}`);return}if(await new Promise(b=>{re=setTimeout(b,t.teleportDelay)}),g.value||(g.value=document.querySelector(`#${j.value}`)),q.value||(q.value=document.querySelector(`#${H.value}`)),!g.value){console.warn("Tooltip element not found in DOM");return}if(t.enableA11y&&typeof document<"u"&&(A=document.activeElement),m.value=!0,w.value=!0,await de(),!c.value){const b=t.highlight||a.highlight,z=t.margin||(b?14:8);c.value=xe(l,g.value,{position:a.placement||t.defaultPlacement,margin:z})}await D(),w.value=!1,t.enableA11y&&(await de(),(u=g.value)==null||u.focus()),h("onTourStart")},t.startDelay)}},F=()=>{clearTimeout(ne),clearTimeout(re),m.value=!1,p.value=!1,w.value=!1,document.querySelectorAll(`.${S.value}`).forEach(a=>a.classList.remove(S.value)),c.value&&(c.value=void 0),t.enableA11y&&A&&(A.focus(),A=null)},te=(a=!1)=>{F(),r.value=0,s.value=0,f.value=1,localStorage.removeItem(v.value),a&&G()},M=async()=>{if(await L(f.value),w.value=!0,s.value=r.value,r.value++,r.value>t.steps.length-1){k();return}f.value=r.value+1,await D(),w.value=!1},B=async()=>{if(await L(s.value),w.value=!0,r.value=s.value,s.value=Math.max(s.value-1,0),r.value<0){k();return}f.value=r.value+1,await D(),w.value=!1},k=()=>{F(),t.saveToLocalStorage!=="never"&&localStorage.setItem(v.value,"true"),h("onTourEnd")},U=async a=>{if(a<0||a>=t.steps.length){console.warn(`Invalid step index: ${a}`);return}await L(a),w.value=!0,r.value=a,s.value=Math.max(a-1,0),f.value=a+1,await D(),w.value=!1},L=async a=>{const l=t.steps[a];l!=null&&l.onBefore&&await l.onBefore()},Z=a=>{!a||!g.value||(g.value.setAttribute("data-arrow",a),T.value=a)},W=()=>{const a=y.value;if(!a||!c.value)return;const l=document.querySelector(a.target);if(!l)return;X(),ee();const u=c.value.update({reference:l,position:a.placement||t.defaultPlacement});Z(u||t.defaultPlacement)},D=async()=>{const a=y.value;if(!a)return;const l=document.querySelector(a.target);!l||!g.value||!c.value||(!t.noScroll&&!a.noScroll&&await new Promise(u=>{const b={duration:Q.duration,offset:Q.offset,easing:"easeInOutQuad",a11y:t.enableA11y,...t.jumpOptions,...a.jumpOptions},z=Fe[b.easing]||fe;Ee(l,{duration:b.duration,offset:b.offset,easing:z,a11y:b.a11y,callback:()=>u()})}),W(),t.saveToLocalStorage==="step"&&localStorage.setItem(v.value,r.value.toString()),a.onAfter&&await a.onAfter(),h("onTourStep",r.value))},X=()=>{document.querySelectorAll(`.${S.value}`).forEach(u=>u.classList.remove(S.value));const a=y.value;if(!a||!t.highlight&&!a.highlight)return;const l=document.querySelector(a.target);l&&(l.classList.add(S.value),C.value=pe(`.${S.value}`))},ee=()=>{const a=y.value,l=t.backdrop||!!(a!=null&&a.backdrop);p.value=l},ae=()=>{E()||m.value&&W()};let oe,ne,re;const ue=()=>{E()||(clearTimeout(oe),ae(),oe=setTimeout(()=>{ae()},t.resizeTimeout))};function pe(a){if(typeof document>"u")return"";const l=document.querySelector(a);if(!l)return"";const u=l.getBoundingClientRect();return`polygon(
    0% 0%,
    0% 100%,
    ${u.left}px 100%,
    ${u.left}px ${u.top}px,
    ${u.right}px ${u.top}px,
    ${u.right}px ${u.bottom}px,
    ${u.left}px ${u.bottom}px,
    ${u.left}px 100%,
    100% 100%,
    100% 0%
  )`}C.value="";const ie=()=>{E()||m.value&&ae()},se=a=>{var l;if(!(!m.value||!t.enableA11y||!t.keyboardNav))switch(a.key){case"Escape":k(),a.preventDefault();break;case"ArrowRight":case"Enter":if(a.key==="Enter"&&((l=a.target)==null?void 0:l.tagName)==="BUTTON")return;M(),a.preventDefault();break;case"ArrowLeft":r.value>0&&(B(),a.preventDefault());break}};return he(()=>{t.keyboardNav&&window.addEventListener("keydown",se),t.autoStart&&G(),window.addEventListener("resize",ue),window.addEventListener("scroll",ie,!0)}),ye(()=>{t.keyboardNav&&window.removeEventListener("keydown",se),window.removeEventListener("resize",ue),window.removeEventListener("scroll",ie,!0),clearTimeout(oe),clearTimeout(ne),clearTimeout(re),m.value&&F()}),o({startTour:G,nextStep:M,lastStep:B,endTour:k,stopTour:F,goToStep:U,resetTour:te,updatePosition:D,updateHighlight:X,updateBackdrop:ee}),(a,l)=>{var u;return R(),be(Te,{to:"body"},[V("div",{class:Se(["vjt-modal-overlay",{"vjt-tour-active":m.value}]),"data-hidden":!m.value},[V("div",{id:H.value,"data-hidden":!p.value,style:we({"clip-path":C.value})},null,12,ze),V("div",{id:j.value,ref_key:"_Tooltip",ref:g,role:"dialog","aria-modal":e.enableA11y?"true":void 0,"aria-label":((u=y.value)==null?void 0:u.ariaLabel)||e.ariaLabel,"aria-describedby":`${j.value}-content`,tabindex:e.enableA11y?"0":void 0,"data-hidden":!m.value||w.value},[m.value?(R(),K("div",{key:`step-${r.value}`},[e.enableA11y?(R(),K("div",Ve," Step "+Y(r.value+1)+" of "+Y(t.steps.length),1)):J("",!0),e.hideArrow?J("",!0):(R(),K("div",{key:1,id:P.value},null,8,He)),ce(a.$slots,"content",{currentStepIndex:r.value,currentStepData:y.value},()=>{var b;return[V("div",{id:`${j.value}-content`,innerHTML:(b=d.getCurrentStep)==null?void 0:b.content},null,8,Ge)]}),ce(a.$slots,"actions",{lastStep:B,nextStep:M,endTour:k,getNextLabel:I.value,props:t,_CurrentStep:d},()=>{var b,z;return[V("div",Ue,[s.value<r.value?(R(),K("button",{key:0,type:"button",onClick:le(B,["prevent"]),"aria-label":e.enableA11y?`Go to previous step, step ${r.value} of ${t.steps.length}`:void 0},Y(((b=t.buttonLabels)==null?void 0:b.back)||"Back"),9,Ke)):J("",!0),t.hideSkip?J("",!0):(R(),K("button",{key:1,type:"button",onClick:le(k,["prevent"]),"aria-label":e.enableA11y?"Skip tour and close":void 0},Y(((z=t.buttonLabels)==null?void 0:z.skip)||"Skip"),9,Je)),V("button",{type:"button",onClick:le(M,["prevent"]),"aria-label":e.enableA11y?O.value?"Finish tour":`Go to next step, step ${f.value+1} of ${t.steps.length}`:void 0},Y(I.value),9,Ye)])]})])):J("",!0)],8,Re)],10,Me)])}}});export{We as _};
