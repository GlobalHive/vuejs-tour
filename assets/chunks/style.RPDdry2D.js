import{d as tt,h as N,p as B,af as et,v as ot,x as at,c as R,o as V,F as nt,j as F,N as rt,r as G,e as D,Z as Q,t as K,_ as lt}from"./framework.yaD0cY4W.js";/*! NanoPop 2.4.2 MIT | https://github.com/Simonwep/nanopop */const it={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},st=(s,a,v)=>{const{container:e,arrow:f,margin:i,padding:h,position:c,variantFlipOrder:m,positionFlipOrder:n}={container:document.documentElement.getBoundingClientRect(),...it,...v},{left:u,top:b}=a.style;a.style.left="0",a.style.top="0";const l=s.getBoundingClientRect(),d=a.getBoundingClientRect(),$={t:l.top-d.height-i,b:l.bottom+i,r:l.right+i,l:l.left-d.width-i},T={vs:l.left,vm:l.left+l.width/2-d.width/2,ve:l.left+l.width-d.width,hs:l.top,hm:l.bottom-l.height/2-d.height/2,he:l.bottom-d.height},[_,x="middle"]=c.split("-"),p=n[_],g=m[x],{top:M,left:A,bottom:E,right:k}=e;for(const j of p){const w=j==="t"||j==="b";let S=$[j];const[C,q]=w?["top","left"]:["left","top"],[I,L]=w?[d.height,d.width]:[d.width,d.height],[O,z]=w?[E,k]:[k,E],[t,r]=w?[M,A]:[A,M];if(!(S<t||S+I+h>O))for(const o of g){let y=T[(w?"v":"h")+o];if(!(y<r||y+L+h>z)){if(y-=d[q],S-=d[C],a.style[q]=`${y}px`,a.style[C]=`${S}px`,f){const H=w?l.width/2:l.height/2,P=L/2,Y=H>P,U={s:Y?P:H,m:P,e:Y?P:L-H},Z={t:I,b:0,r:0,l:I},W=y+U[o],X=S+Z[j];f.style[q]=`${W}px`,f.style[C]=`${X}px`}return j+o}}}return a.style.left=u,a.style.top=b,null},ut=(s,a,v)=>{const e=typeof s=="object"&&!(s instanceof HTMLElement)?s:{reference:s,popper:a,...v};return{update(f=e){const{reference:i,popper:h}=Object.assign(e,f);if(!h||!i)throw new Error("Popper- or reference-element missing.");return st(i,h,e)}}};var ct=function(a,v,e,f){return a/=f/2,a<1?e/2*a*a+v:(a--,-e/2*(a*(a-2)-1)+v)},J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},dt=function(){var a=void 0,v=void 0,e=void 0,f=void 0,i=void 0,h=void 0,c=void 0,m=void 0,n=void 0,u=void 0,b=void 0,l=void 0;function d(){return window.scrollY||window.pageYOffset}function $(p){return p.getBoundingClientRect().top+v}function T(p){n||(n=p),u=p-n,b=i(u,v,c,m),window.scrollTo(0,b),u<m?window.requestAnimationFrame(T):_()}function _(){window.scrollTo(0,v+c),a&&h&&(a.setAttribute("tabindex","-1"),a.focus()),typeof l=="function"&&l(),n=!1}function x(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(m=g.duration||1e3,f=g.offset||0,l=g.callback,i=g.easing||ct,h=g.a11y||!1,v=d(),typeof p>"u"?"undefined":J(p)){case"number":a=void 0,h=!1,e=v+p;break;case"object":a=p,e=$(a);break;case"string":a=document.querySelector(p),e=$(a);break}switch(c=e-v+f,J(g.duration)){case"number":m=g.duration;break;case"function":m=g.duration(c);break}window.requestAnimationFrame(T)}return x},pt=dt();const vt=["innerHTML"],ft={class:"vjt-actions"},ht={key:0,id:"vjt-arrow",class:"vjt-arrow"},gt=tt({__name:"VTour",props:{name:{default:"default"},steps:{},backdrop:{type:Boolean,default:!1},autoStart:{type:Boolean,default:!1},startDelay:{default:0},highlight:{type:Boolean,default:!1},margin:{default:8},buttonLabels:{},saveToLocalStorage:{default:"never"},hideSkip:{type:Boolean,default:!1},hideArrow:{type:Boolean,default:!1},noScroll:{type:Boolean,default:!1},resizeTimeout:{default:250}},emits:["onTourStart","onTourEnd","onTourStep"],setup(s,{expose:a,emit:v}){const e=s,f=v,i=N(()=>`vjt-${e.name}`),h=B(),c=B(),m=B(),n=B(0),u=B(0),b=B(1),l=N(()=>e.steps[n.value]),d=N(()=>e.steps[u.value]),$=N(()=>e.steps[b.value]),T=et({currentStep:n,lastStep:u,nextStep:b,getCurrentStep:l,getLastStep:d,getNextStep:$}),_=N(()=>{var r,o;return n.value===e.steps.length-1?((r=e.buttonLabels)==null?void 0:r.done)??"Done":((o=e.buttonLabels)==null?void 0:o.next)??"Next"}),x=B(""),p=async()=>{if(localStorage.getItem(i.value)!=="true"){if(e.saveToLocalStorage==="step"){const t=localStorage.getItem(i.value);n.value=parseInt(t||"0",10),n.value>0&&(u.value=Math.max(n.value-1,0),b.value=n.value+1)}else n.value=0;setTimeout(async()=>{await w(n.value);const t=l.value;if(!t){console.warn("No step data available");return}const r=document.querySelector(t.target);if(!r||!c.value){console.warn(`Tour target element not found: ${t.target}`);return}h.value||(h.value=ut(r,c.value,{position:t.placement||"right",margin:e.margin||(e.highlight||t.highlight?14:8)})),await S(),f("onTourStart")},e.startDelay)}},g=()=>{var t,r;(t=m.value)==null||t.setAttribute("data-hidden",""),document.querySelectorAll(".vjt-highlight").forEach(o=>o.classList.remove("vjt-highlight")),(r=c.value)==null||r.setAttribute("data-hidden","")},M=(t=!1)=>{g(),n.value=0,u.value=0,b.value=1,localStorage.removeItem(i.value),t&&p()},A=async()=>{if(await w(b.value),u.value=n.value,n.value++,n.value>e.steps.length-1){k();return}b.value=n.value+1,await S()},E=async()=>{if(await w(u.value),n.value=u.value,u.value=Math.max(u.value-1,0),n.value<0){k();return}b.value=n.value+1,await S()},k=()=>{g(),e.saveToLocalStorage!=="never"&&localStorage.setItem(i.value,"true"),f("onTourEnd")},j=async t=>{if(t<0||t>=e.steps.length){console.warn(`Invalid step index: ${t}`);return}await w(t),n.value=t,u.value=Math.max(t-1,0),b.value=t+1,await S()},w=async t=>{const r=e.steps[t];r!=null&&r.onBefore&&await r.onBefore()},S=async()=>{const t=l.value;if(!t){console.warn("No current step data available");return}const r=document.querySelector(t.target);if(!r||!c.value||!h.value){console.warn("Cannot update position: missing required elements");return}C(),q(),c.value.setAttribute("data-hidden",""),!e.noScroll&&!t.noScroll&&await new Promise(y=>{pt(r,{duration:500,offset:-100,callback:y})}),c.value.removeAttribute("data-hidden");const o=h.value.update({reference:r,position:t.placement||"right"})||"right";c.value.setAttribute("data-arrow",o),e.saveToLocalStorage==="step"&&localStorage.setItem(i.value,n.value.toString()),t.onAfter&&await t.onAfter(),f("onTourStep",n.value)},C=()=>{document.querySelectorAll(".vjt-highlight").forEach(o=>o.classList.remove("vjt-highlight"));const t=l.value;if(!e.highlight&&!(t!=null&&t.highlight))return;if(!t){console.warn("No current step data for highlight");return}const r=document.querySelector(t.target);if(!r){console.warn(`Highlight target not found: ${t.target}`);return}r.classList.add("vjt-highlight"),x.value=z(".vjt-highlight")},q=()=>{var o,y;const t=l.value;e.backdrop||(t==null?void 0:t.backdrop)?(o=m.value)==null||o.removeAttribute("data-hidden"):(y=m.value)==null||y.setAttribute("data-hidden","")},I=()=>{localStorage.getItem(i.value)!=="true"&&S()};let L;const O=()=>{localStorage.getItem(i.value)!=="true"&&(clearTimeout(L),I(),L=setTimeout(()=>{I()},e.resizeTimeout))};function z(t){if(typeof document>"u")return"";const r=document.querySelector(t);if(!r)return"";const o=r.getBoundingClientRect();return`polygon(
    0% 0%,
    0% 100%,
    ${o.left}px 100%,
    ${o.left}px ${o.top}px,
    ${o.right}px ${o.top}px,
    ${o.right}px ${o.bottom}px,
    ${o.left}px ${o.bottom}px,
    ${o.left}px 100%,
    100% 100%,
    100% 0%
  )`}return typeof document<"u"&&(x.value=z(".vjt-highlight")),ot(()=>{c.value=document.querySelector("#vjt-tooltip"),m.value=document.querySelector("#vjt-backdrop"),e.autoStart&&p(),window.addEventListener("resize",O)}),at(()=>{window.removeEventListener("resize",O),clearTimeout(L)}),a({startTour:p,nextStep:A,lastStep:E,endTour:k,stopTour:g,goToStep:j,resetTour:M,updatePosition:S,updateHighlight:C,updateBackdrop:q}),(t,r)=>(V(),R(nt,null,[F("div",{id:"vjt-backdrop",ref_key:"backdrop",ref:m,"data-hidden":"",style:rt({"clip-path":x.value})},null,4),F("div",{id:"vjt-tooltip",ref_key:"tooltip",ref:c,role:"tooltip","data-arrow":"right","data-hidden":""},[G(t.$slots,"content",{currentStepIndex:n.value,currentStepData:l.value},()=>{var o;return[F("div",{innerHTML:(o=T.getCurrentStep)==null?void 0:o.content},null,8,vt)]},!0),G(t.$slots,"actions",{lastStep:E,nextStep:A,endTour:k,getNextLabel:_.value,props:e,_CurrentStep:T},()=>{var o,y;return[F("div",ft,[u.value<n.value?(V(),R("button",{key:0,type:"button",class:"vjt-btn vjt-btn-back",onClick:Q(E,["prevent"])},K(((o=e.buttonLabels)==null?void 0:o.back)||"Back"),1)):D("",!0),e.hideSkip?D("",!0):(V(),R("button",{key:1,type:"button",class:"vjt-btn vjt-btn-skip",onClick:Q(k,["prevent"])},K(((y=e.buttonLabels)==null?void 0:y.skip)||"Skip"),1)),F("button",{type:"button",class:"vjt-btn vjt-btn-next",onClick:Q(A,["prevent"])},K(_.value),1)])]},!0),e.hideArrow?D("",!0):(V(),R("div",ht))],512)],64))}}),bt=lt(gt,[["__scopeId","data-v-d3a46f7b"]]);export{bt as V};
